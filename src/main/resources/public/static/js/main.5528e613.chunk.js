(this["webpackJsonpabalon-web-client"]=this["webpackJsonpabalon-web-client"]||[]).push([[0],{105:function(e,t,n){e.exports=n(174)},110:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(13),i=n.n(a),l=(n(110),n(48)),c=n(37),u=n(21),s=n(69),d=n.n(s),m=n(70),h=n.n(m),w=n(71),f=n.n(w),S=n(72),b=n.n(S),p=n(73),y=n.n(p),k=n(74),E=n.n(k),v=n(75),g=n.n(v),B=n(76),T=n.n(B),M=n(77),A=n.n(M),x=n(78),O=n.n(x),W=n(49),j=n(34),I=n.n(j),C=n(30),G=n(25),P={Black:"BLACK_PLAYER",White:"WHITE_PLAYER"},N={BlackSoldier:"BlackSoldier",WhiteSoldier:"WhiteSoldier",Empty:"Empty",BlackSoldierMarkedAction:"BlackSoldierMarkedAction",WhiteSoldierMarkedAction:"WhiteSoldierMarkedAction",EmptyMarkedAction:"EmptyMarkedAction",BlackSoldierMarkedSelection:"BlackSoldierMarkedSelection",WhiteSoldierMarkedSelection:"WhiteSoldierMarkedSelection"},_=function(){function e(t){Object(C.a)(this,e),this.content=t}return Object(G.a)(e,[{key:"isBlackSoldier",value:function(){return[N.BlackSoldier,N.BlackSoldierMarkedAction,N.BlackSoldierMarkedSelection].includes(this.content)}},{key:"isWhiteSoldier",value:function(){return[N.WhiteSoldier,N.WhiteSoldierMarkedAction,N.WhiteSoldierMarkedSelection].includes(this.content)}}]),e}(),L=function(e){return e>=0&&e<=4?e:e>=5&&e<=8?8-e:0},R=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(C.a)(this,e),this.boardMat=[];for(var r=function(e){for(var r=new Array(5+L(e)),o=function(t){var o=n.find((function(n){return n.row===e&&n.column===t}));r[t]=o?o.tile:new _(N.Empty)},a=0;a<r.length;a++)o(a);t.boardMat.push(r)},o=0;o<9;o++)r(o)}return Object(G.a)(e,[{key:"getTile",value:function(e,t){return this.boardMat[e][t]}},{key:"setTile",value:function(e,t,n){this.boardMat[e][t]=new _(n)}},{key:"getBoardState",value:function(){for(var e=[],t=0;t<this.boardMat.length;t++){for(var n=this.boardMat[t],r=[],o=0;o<n.length;o++){var a=n[o];r.push({row:t,column:o,tile:a})}e.push(r)}return e}}]),e}(),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.Black;Object(C.a)(this,e),this.board=new R(t),this.turn=n}return Object(G.a)(e,[{key:"switchTurn",value:function(){this.turn===P.Black?this.turn=P.White:this.turn===P.White&&(this.turn=P.Black)}},{key:"markTileSelected",value:function(e,t){switch(this.board.getTile(e,t).content){case N.BlackSoldier:return this.board.setTile(e,t,N.BlackSoldierMarkedSelection),!0;case N.WhiteSoldier:return this.board.setTile(e,t,N.WhiteSoldierMarkedSelection),!0;default:return!1}}},{key:"markTileAction",value:function(e,t){switch(this.board.getTile(e,t).content){case N.BlackSoldier:return this.board.setTile(e,t,N.BlackSoldierMarkedAction),!0;case N.WhiteSoldier:return this.board.setTile(e,t,N.WhiteSoldierMarkedAction),!0;case N.Empty:return this.board.setTile(e,t,N.EmptyMarkedAction),!0;default:return!1}}},{key:"unmarkTileSelected",value:function(e,t){switch(this.board.getTile(e,t).content){case N.BlackSoldierMarkedSelection:return this.board.setTile(e,t,N.BlackSoldier),!0;case N.WhiteSoldierMarkedSelection:return this.board.setTile(e,t,N.WhiteSoldier),!0;default:return!1}}},{key:"unmarkTileAction",value:function(e,t){switch(this.board.getTile(e,t).content){case N.BlackSoldierMarkedAction:return this.board.setTile(e,t,N.BlackSoldier),!0;case N.WhiteSoldierMarkedAction:return this.board.setTile(e,t,N.WhiteSoldier),!0;case N.EmptyMarkedAction:return this.board.setTile(e,t,N.Empty),!0;default:return!1}}}]),e}(),H=function(e,t){var n=new Promise((function(t,n){var r=setTimeout((function(){clearTimeout(r),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])},F=function(e){switch(e){case P.Black:return"BLACK";case P.White:return"WHITE";default:return""}},J=function(e){switch(e){case"BLACK":return P.Black;case"WHITE":return P.White;default:return""}},K=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,i=e.getBoardState()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,c=!0,u=!1,s=void 0;try{for(var d,m=l[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value,w=h.row,f=h.column,S=h.tile;S.isBlackSoldier()?t.push({row:w,column:f,soldier:"BLACK"}):S.isWhiteSoldier()&&t.push({row:w,column:f,soldier:"WHITE"})}}catch(b){u=!0,s=b}finally{try{c||null==m.return||m.return()}finally{if(u)throw s}}}}catch(b){r=!0,o=b}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return t},V=function(e){switch(e){case"WHITE":return new _(N.WhiteSoldier);case"BLACK":return new _(N.BlackSoldier);default:return new _(N.Empty)}},Y=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,c=l.row,u=l.column,s=l.soldier;t.push({row:c,column:u,tile:V(s)})}}catch(d){r=!0,o=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return new R(t)},z=n(54),q=n(202),U=n(199),$=n(200),Q=function(e){var t=e.againstAI,n=Object(r.useContext)(ce),a=n.abalonGameState,i=n.abalonGameDispatch,l=I()(h.a),c=Object(u.a)(l,1)[0],s=I()(y.a),m=Object(u.a)(s,1)[0],w=I()(b.a),S=Object(u.a)(w,1)[0],p=I()(g.a),k=Object(u.a)(p,1)[0],v=I()(T.a),B=Object(u.a)(v,1)[0],M=I()(d.a),A=Object(u.a)(M,1)[0],x=I()(E.a),O=Object(u.a)(x,1)[0],j=I()(f.a),C=Object(u.a)(j,1)[0],G=Object(z.useSnackbar)().enqueueSnackbar,_=Object(r.useState)(!1),L=Object(u.a)(_,2),R=L[0],D=L[1],V=a.selectedTileState,Q=a.abalonGame,X=Q.board.getBoardState(),Z=function(e){switch(e.content){case N.WhiteSoldier:return m;case N.BlackSoldier:return c;case N.BlackSoldierMarkedSelection:return S;case N.WhiteSoldierMarkedSelection:return k;case N.EmptyMarkedAction:return A;case N.WhiteSoldierMarkedAction:return O;case N.BlackSoldierMarkedAction:return C;case N.Empty:default:return""}},ee=function(e,n){var r=n.row,o=n.column,l=n.tile;if(null===V)(l.isBlackSoldier()&&Q.turn===P.White||l.isWhiteSoldier()&&Q.turn===P.Black)&&G("Mind the current turn!"),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4,o={currentTurn:F(e),currentPos:t,boardState:K(n)};return H(r,new Promise((function(e,t){fetch("/api/abalongame/moves/all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))})))}(Q.turn,{row:r,column:o},Q.board).then((function(e){i(function(e,t){return{type:"GAME_FIRST_SELECTION",payload:{tileState:e,nextMovesPositions:t}}}(n,e))})).catch((function(e){G("There has been an error reaching the server",{variant:"error"})}));else if(a.nextMovesPositions.find((function(e){return e.row===r&&e.column===o}))){var c={row:a.selectedTileState.row,column:a.selectedTileState.column};(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,a={currentTurn:F(e),sourcePosition:t,destPosition:n,boardState:K(r)};return H(o,new Promise((function(e,t){fetch("/api/abalongame/moves/execute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return Y(e)})).then((function(t){return e(t)})).catch((function(e){return t(e)}))})))})(Q.turn,c,{row:r,column:o},Q.board).then((function(e){i(function(e,t){return{type:"GAME_COMMIT_MOVE",payload:{newAbalonBoard:e,againstAI:t}}}(e,t))})).catch((function(e){G("There has been an error reaching the server",{variant:"error"})}))}else i({type:"GAME_RESET_SELECTION"})};return Object(r.useEffect)((function(){R||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r={boardState:K(e),againstAI:t};return H(n,new Promise((function(e,t){fetch("/api/abalongame/rules/winner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.text()})).then((function(e){return J(e)})).then((function(t){return e(t)})).catch((function(e){return t(e)}))})))}(Q.board,t).then((function(e){[P.White,P.Black].includes(e)&&(G("Player ".concat(e," wins! You may continue playing if you want :-)"),{variant:"success"}),D(!0))}))}),[Q.turn,t,R]),Object(r.useEffect)((function(){a.isAITurn&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r={currentTurn:F(e),boardState:K(t)};return H(n,new Promise((function(e,t){fetch("/api/abalongame/moves/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){return Y(e)})).then((function(t){return e(t)})).catch((function(e){return t(e)}))})))}(Q.turn,Q.board,6e4).then((function(e){i(function(e){return{type:"GAME_AI_COMMIT_MOVE ",payload:e}}(e))}))}),[a.isAITurn]),o.a.createElement("div",null,o.a.createElement(W.Stage,{width:400,height:400},o.a.createElement(W.Layer,null,o.a.createElement(W.Image,{image:B}),X.map((function(e){return e.map((function(e){var t=function(e,t){var n;return{x:25*(4-((n=e)>=0&&n<=4?n:n>=5&&n<=8?8-n:0))/2-function(e){switch(e){case 0:return 0;case 1:return 2;case 2:return 8;case 3:return 11;case 4:return 18;case 5:return 11;case 6:return 8;case 7:return 2;case 8:default:return 0}}(e)+25*t+10*t+65,y:25*e+38+6*e}}(e.row,e.column),n=t.x,r=t.y;return o.a.createElement(W.Image,{key:"".concat(e.row," ").concat(e.column),image:Z(e.tile),width:25,height:25,x:n,y:r,onClick:function(t){a.isAITurn||ee(0,e)},onMouseEnter:function(t){e.tile.content!==N.Empty&&(document.body.style.cursor="pointer")},onMouseLeave:function(e){document.body.style.cursor="default"}})}))})))),a.isAITurn&&o.a.createElement(q.a,{display:"flex",flexDirection:"row",justifyContent:"center"},o.a.createElement(U.a,{variant:"h4",style:{marginRight:5}},"AI is thinking"),o.a.createElement($.a,{color:"secondary"})))},X=n(44),Z="/",ee="/game",te="/game-ai",ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.prototype,n=Object.create(t);return Object.assign(n,e),n},re=function(e){return{abalonGame:new D(e),selectedTileState:null,nextMovesPositions:[],isAITurn:!1}},oe=function(e,t){switch(t.type){case"GAME_FIRST_SELECTION":var n=t.payload,r=n.tileState,o=n.nextMovesPositions,a=r.row,i=r.column,l=(r.tile,ne(e.abalonGame,D.prototype));l.markTileSelected(a,i);var c=!0,u=!1,s=void 0;try{for(var d,m=o[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var h=d.value,w=h.row,f=h.column;l.markTileAction(w,f)}}catch(q){u=!0,s=q}finally{try{c||null==m.return||m.return()}finally{if(u)throw s}}return Object(X.a)({},e,{abalonGame:l,selectedTileState:r,nextMovesPositions:o});case"GAME_COMMIT_MOVE":var S=t.payload,b=S.newAbalonBoard,p=S.againstAI,y=e.selectedTileState,k=y.row,E=y.column,v=ne(e.abalonGame,D.prototype);v.unmarkTileSelected(k,E);var g=!0,B=!1,T=void 0;try{for(var M,A=e.nextMovesPositions[Symbol.iterator]();!(g=(M=A.next()).done);g=!0){var x=M.value,O=x.row,W=x.column;v.unmarkTileAction(O,W)}}catch(q){B=!0,T=q}finally{try{g||null==A.return||A.return()}finally{if(B)throw T}}return v.board=b,v.switchTurn(),Object(X.a)({},e,{abalonGame:v,selectedTileState:null,nextMovesPositions:[],isAITurn:p});case"GAME_AI_COMMIT_MOVE ":var j=t.payload,I=ne(e.abalonGame,D.prototype);return I.board=j,I.switchTurn(),Object(X.a)({},e,{abalonGame:I,isAITurn:!1});case"GAME_SECOND_SELECTION":var C=t.payload,G=(C.row,C.column,C.tile,e.selectedTileState,ne(e.abalonGame,D.prototype));return Object(X.a)({},e,{abalonGame:G,selectedTileState:C});case"GAME_RESET_SELECTION":var P=ne(e.abalonGame,D.prototype),N=e.selectedTileState,_=N.row,L=N.column;P.unmarkTileSelected(_,L);var R=!0,H=!1,F=void 0;try{for(var J,K=e.nextMovesPositions[Symbol.iterator]();!(R=(J=K.next()).done);R=!0){var V=J.value,Y=V.row,z=V.column;P.unmarkTileAction(Y,z)}}catch(q){H=!0,F=q}finally{try{R||null==K.return||K.return()}finally{if(H)throw F}}return Object(X.a)({},e,{abalonGame:P,selectedTileState:null,nextMovesPositions:[]});default:return e}},ae=[{row:0,column:0,tile:new _(N.WhiteSoldier)},{row:0,column:1,tile:new _(N.WhiteSoldier)},{row:0,column:2,tile:new _(N.WhiteSoldier)},{row:0,column:3,tile:new _(N.WhiteSoldier)},{row:0,column:4,tile:new _(N.WhiteSoldier)},{row:1,column:0,tile:new _(N.WhiteSoldier)},{row:1,column:1,tile:new _(N.WhiteSoldier)},{row:1,column:2,tile:new _(N.WhiteSoldier)},{row:1,column:3,tile:new _(N.WhiteSoldier)},{row:1,column:4,tile:new _(N.WhiteSoldier)},{row:1,column:5,tile:new _(N.WhiteSoldier)},{row:2,column:0,tile:new _(N.WhiteSoldier)},{row:2,column:1,tile:new _(N.WhiteSoldier)},{row:2,column:2,tile:new _(N.WhiteSoldier)},{row:2,column:3,tile:new _(N.WhiteSoldier)},{row:2,column:4,tile:new _(N.WhiteSoldier)},{row:2,column:5,tile:new _(N.WhiteSoldier)},{row:2,column:6,tile:new _(N.WhiteSoldier)},{row:3,column:0,tile:new _(N.Empty)},{row:3,column:1,tile:new _(N.Empty)},{row:3,column:2,tile:new _(N.Empty)},{row:3,column:3,tile:new _(N.Empty)},{row:3,column:4,tile:new _(N.Empty)},{row:3,column:5,tile:new _(N.Empty)},{row:3,column:6,tile:new _(N.Empty)},{row:3,column:7,tile:new _(N.Empty)},{row:4,column:0,tile:new _(N.Empty)},{row:4,column:1,tile:new _(N.Empty)},{row:4,column:2,tile:new _(N.Empty)},{row:4,column:3,tile:new _(N.Empty)},{row:4,column:4,tile:new _(N.Empty)},{row:4,column:5,tile:new _(N.Empty)},{row:4,column:6,tile:new _(N.Empty)},{row:4,column:7,tile:new _(N.Empty)},{row:4,column:8,tile:new _(N.Empty)},{row:5,column:0,tile:new _(N.Empty)},{row:5,column:1,tile:new _(N.Empty)},{row:5,column:2,tile:new _(N.Empty)},{row:5,column:3,tile:new _(N.Empty)},{row:5,column:4,tile:new _(N.Empty)},{row:5,column:5,tile:new _(N.Empty)},{row:5,column:6,tile:new _(N.Empty)},{row:5,column:7,tile:new _(N.Empty)},{row:6,column:0,tile:new _(N.BlackSoldier)},{row:6,column:1,tile:new _(N.BlackSoldier)},{row:6,column:2,tile:new _(N.BlackSoldier)},{row:6,column:3,tile:new _(N.BlackSoldier)},{row:6,column:4,tile:new _(N.BlackSoldier)},{row:6,column:5,tile:new _(N.BlackSoldier)},{row:6,column:6,tile:new _(N.BlackSoldier)},{row:7,column:0,tile:new _(N.BlackSoldier)},{row:7,column:1,tile:new _(N.BlackSoldier)},{row:7,column:2,tile:new _(N.BlackSoldier)},{row:7,column:3,tile:new _(N.BlackSoldier)},{row:7,column:4,tile:new _(N.BlackSoldier)},{row:7,column:5,tile:new _(N.BlackSoldier)},{row:8,column:0,tile:new _(N.BlackSoldier)},{row:8,column:1,tile:new _(N.BlackSoldier)},{row:8,column:2,tile:new _(N.BlackSoldier)},{row:8,column:3,tile:new _(N.BlackSoldier)},{row:8,column:4,tile:new _(N.BlackSoldier)}],ie=n(90),le=n(201),ce=o.a.createContext(),ue=Object(ie.a)((function(e){return{pageTitle:{color:"#E4A148",fontFamily:"Luminari, fantasy"},turnHeader:{color:"#BCD39C",fontSize:20,fontFamily:"Luminari, fantasy",position:"relative",right:5},appBar:{width:"100%",display:"flex",alignItems:"baseline"},containerBox:{height:"100vh"},boxButton:{background:"#BCD39C",color:"white",marginTop:3,marginBottom:3}}})),se=function(e){var t=e.initialBoardState,n=void 0===t?ae:t,a=e.againstAI,i=void 0!==a&&a,l=Object(r.useReducer)(oe,n,re),c=Object(u.a)(l,2),s=c[0],d=c[1],m=s.abalonGame,h=ue();return o.a.createElement(ce.Provider,{value:{abalonGameState:s,abalonGameDispatch:d}},o.a.createElement("div",null,o.a.createElement("div",{className:h.appBar},o.a.createElement("span",{style:{flexGrow:1}},o.a.createElement("h1",{className:h.pageTitle},"Game Is In Session")),o.a.createElement(U.a,{className:h.turnHeader},"Up Next: ",m.turn===P.White?"White":"Black")),o.a.createElement(le.a,{style:{marginBottom:20}}),o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement(Q,{againstAI:i}))))},de=n(203),me=n(204),he=Object(ie.a)((function(e){return{boxTitle:{color:"#E4A148",fontFamily:"Luminari, fantasy"},boxSubHeader:{color:"#BCD39C",fontSize:20,fontFamily:"Luminari, fantasy"},boxContent:{borderWidth:1,borderRadius:3,borderColor:"#E4A148",borderStyle:"double",paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20},containerBox:{height:"100vh"},boxButton:{background:"#BCD39C",color:"white",marginTop:3,marginBottom:3}}})),we=function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],i=n[1],c=he();return o.a.createElement(o.a.Fragment,null,o.a.createElement(de.a,{fullScreen:!0,onClose:function(){return i(!1)},"aria-labelledby":"simple-dialog-title",open:a},o.a.createElement(me.a,{onClick:function(){return i(!1)},className:c.boxButton},"Back"),o.a.createElement("img",{src:A.a}),o.a.createElement("img",{src:O.a})),o.a.createElement(q.a,{display:"flex",alignItems:"center",justifyContent:"center",className:c.containerBox},o.a.createElement(q.a,{className:c.boxContent},o.a.createElement(U.a,{variant:"h3",className:c.boxTitle},"Abalon Game"),o.a.createElement(le.a,{style:{marginBottom:20}}),o.a.createElement(U.a,{variant:"caption",className:c.boxSubHeader},"Good luck beating this AI"),o.a.createElement(q.a,{display:"flex",flexDirection:"column"},o.a.createElement(me.a,{className:c.boxButton,onClick:function(e){document.getElementById("gotoGameBtn").click()}},"Play Against Each Other"),o.a.createElement(l.b,{id:"gotoGameBtn",to:ee}),o.a.createElement(me.a,{className:c.boxButton,onClick:function(e){document.getElementById("gotoGameBtn2").click()}},"Test Our AI"),o.a.createElement(l.b,{id:"gotoGameBtn2",to:te}),o.a.createElement(me.a,{className:c.boxButton,onClick:function(e){i(!0)}},"Game Rules")))))};var fe=function(){return o.a.createElement(z.SnackbarProvider,{maxSnack:2},o.a.createElement(l.a,null,o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:Z,render:function(e){return o.a.createElement(we,e)}}),o.a.createElement(c.a,{exact:!0,path:ee,render:function(e){return o.a.createElement(se,Object.assign({},e,{againstAI:!1}))}}),o.a.createElement(c.a,{exact:!0,path:te,render:function(e){return o.a.createElement(se,Object.assign({},e,{againstAI:!0}))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t,n){e.exports=n.p+"static/media/empty-marked.5e7db21a.png"},70:function(e,t,n){e.exports=n.p+"static/media/black-ball.6bcb523e.png"},71:function(e,t,n){e.exports=n.p+"static/media/black-marked.1a94884f.png"},72:function(e,t,n){e.exports=n.p+"static/media/black-ball-light-yellow.7d77d272.png"},73:function(e,t,n){e.exports=n.p+"static/media/white-ball.2c4ecebf.png"},74:function(e,t,n){e.exports=n.p+"static/media/white-marked.9ec9779c.png"},75:function(e,t,n){e.exports=n.p+"static/media/white-ball-light-yellow.0399190f.png"},76:function(e,t,n){e.exports=n.p+"static/media/back-board.b452512b.jpg"},77:function(e,t,n){e.exports=n.p+"static/media/instructions.8e561df1.png"},78:function(e,t,n){e.exports=n.p+"static/media/instructions2.c89165a4.png"}},[[105,1,2]]]);
//# sourceMappingURL=main.5528e613.chunk.js.map